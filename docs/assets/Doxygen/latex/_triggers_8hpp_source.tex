\hypertarget{_triggers_8hpp_source}{}\doxysection{Triggers.\+hpp}
\label{_triggers_8hpp_source}\index{Modules/Core/Cognition/Triggers.hpp@{Modules/Core/Cognition/Triggers.hpp}}
\mbox{\hyperlink{_triggers_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_cognition_8hpp}{Cognition.hpp}}"{}}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 }
\DoxyCodeLine{13 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_af967818154ea932a2c1f4389ad577538}{TakeoffTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{14      }
\DoxyCodeLine{15     \textcolor{keywordflow}{return} state-\/>\mbox{\hyperlink{struct_cognition_state__t_a7406391daa0166dd27f38052c27de69e}{missionStart}} == 0 \&\& }
\DoxyCodeLine{16            !state-\/>\mbox{\hyperlink{struct_cognition_state__t_a1378abfdec924d3080a8d1b564f08539}{keepInConflict}} \&\&}
\DoxyCodeLine{17            !state-\/>\mbox{\hyperlink{struct_cognition_state__t_a4ca684bc2771781625d1d1d0658a39ba}{keepOutConflict}} \&\&}
\DoxyCodeLine{18            state-\/>\mbox{\hyperlink{struct_cognition_state__t_a7f4e8c1d9f90b66ca9bdd55fc33d3321}{utcTime}} >= state-\/>\mbox{\hyperlink{struct_cognition_state__t_abc984ff4b973240be8bbef03446d6878}{scenarioTime}};}
\DoxyCodeLine{19 \}}
\DoxyCodeLine{20 }
\DoxyCodeLine{24 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_ae7910b4a30d9014a57c0f9a6b1abdd12}{NominalDepartureTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{25     }
\DoxyCodeLine{26     \textcolor{keywordflow}{return} state-\/>\mbox{\hyperlink{struct_cognition_state__t_a7406391daa0166dd27f38052c27de69e}{missionStart}} > 0;}
\DoxyCodeLine{27 \}}
\DoxyCodeLine{28 }
\DoxyCodeLine{34 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a7e285cc7d2a08011ea51d0f109a081de}{FenceConflictTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{35     }
\DoxyCodeLine{36     \textcolor{keywordflow}{return} state-\/>\mbox{\hyperlink{struct_cognition_state__t_a78ee9e12276b90a5b306503b41b416c5}{planProjectedFenceConflict}} \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a46258eb8b91d09d4941662f76a90dbf8}{timeToFenceViolation}} < state-\/>\mbox{\hyperlink{struct_cognition_state__t_af6c583b3c5071419e1e5cdad08018e59}{parameters}}.planLookaheadTime \&\&}
\DoxyCodeLine{37            !state-\/>\mbox{\hyperlink{struct_cognition_state__t_aea377f9e7f55f7a8d00a69ea58c92060}{trafficConflict}} \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a54fd7f200339114b10a7865604630070}{icReady}};}
\DoxyCodeLine{38 \}}
\DoxyCodeLine{39 }
\DoxyCodeLine{43 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_aab45952cb3c4d835834ead515955a569}{SecondaryPlanCompletionTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{44     }
\DoxyCodeLine{45     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}} != \textcolor{keyword}{nullptr})\{}
\DoxyCodeLine{46         std::string planID = state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>getID();}
\DoxyCodeLine{47         \textcolor{keywordflow}{return} (planID != \textcolor{stringliteral}{"{}Plan0"{}} \&\&}
\DoxyCodeLine{48                 planID != \textcolor{stringliteral}{"{}DitchPath"{}} \&\&}
\DoxyCodeLine{49                 state-\/>\mbox{\hyperlink{struct_cognition_state__t_a12e10cd60bb81a3afbd1e87f8f90d4d7}{nextWpId}}[planID] >= state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>size()) \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a54fd7f200339114b10a7865604630070}{icReady}};}
\DoxyCodeLine{50     \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{51         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{52     \}}
\DoxyCodeLine{53 \}}
\DoxyCodeLine{54 }
\DoxyCodeLine{58 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a5a693b233a0e1e8ccf22f118f783765c}{PrimaryPlanCompletionTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{59     }
\DoxyCodeLine{60     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}} != \textcolor{keyword}{nullptr})\{}
\DoxyCodeLine{61         std::string planID = state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>getID();}
\DoxyCodeLine{62         \textcolor{keywordflow}{return} (planID == \textcolor{stringliteral}{"{}Plan0"{}} \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a12e10cd60bb81a3afbd1e87f8f90d4d7}{nextWpId}}[planID] >= state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>size());}
\DoxyCodeLine{63     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{64         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{65     \}}
\DoxyCodeLine{66 \}}
\DoxyCodeLine{67 }
\DoxyCodeLine{68 }
\DoxyCodeLine{72 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a976f11c0ba8aa68c519126289ff60280}{FlightPlanDeviationTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{73     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}} == \textcolor{keyword}{nullptr})\{}
\DoxyCodeLine{74         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{75     \}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>getID() == \textcolor{stringliteral}{"{}Plan0"{}})\{}
\DoxyCodeLine{78         \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_a12e10cd60bb81a3afbd1e87f8f90d4d7}{nextWpId}}[\textcolor{stringliteral}{"{}Plan0"{}}] >= state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>size())\{}
\DoxyCodeLine{79             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{80         \}}
\DoxyCodeLine{81     \}}
\DoxyCodeLine{82     state-\/>\mbox{\hyperlink{struct_cognition_state__t_aa68b8788815825c475cec9e92af819da}{XtrackConflict}} = (state-\/>\mbox{\hyperlink{struct_cognition_state__t_ac9c0e608c7733a770f5cc4db2125cc4c}{xtrackDeviation}} > state-\/>\mbox{\hyperlink{struct_cognition_state__t_af6c583b3c5071419e1e5cdad08018e59}{parameters}}.allowedXtrackDeviation) \&\&}
\DoxyCodeLine{83                             !state-\/>\mbox{\hyperlink{struct_cognition_state__t_aea377f9e7f55f7a8d00a69ea58c92060}{trafficConflict}} \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a54fd7f200339114b10a7865604630070}{icReady}};}
\DoxyCodeLine{84     \textcolor{keywordflow}{return} state-\/>\mbox{\hyperlink{struct_cognition_state__t_aa68b8788815825c475cec9e92af819da}{XtrackConflict}};}
\DoxyCodeLine{85 \}}
\DoxyCodeLine{86 }
\DoxyCodeLine{90 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a2ea59a838337ed32291052beba680b8d}{FlightReplanTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{91     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}} == \textcolor{keyword}{nullptr})\{}
\DoxyCodeLine{92         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{93     \}}
\DoxyCodeLine{94     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>getID() != \textcolor{stringliteral}{"{}Plan0"{}} \&\&}
\DoxyCodeLine{95        state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>getID() != \textcolor{stringliteral}{"{}DitchPath"{}})\{}
\DoxyCodeLine{96         \textcolor{keywordflow}{if}(!state-\/>\mbox{\hyperlink{struct_cognition_state__t_a999a702044a528e4c0e63e4d46c268fc}{lineOfSight2GoalPrev}} \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_aeace19241991feca3b15592cb9c8c542}{lineOfSight2Goal}})\{}
\DoxyCodeLine{97             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{98         \}}
\DoxyCodeLine{99     \}}
\DoxyCodeLine{100     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{101 \}}
\DoxyCodeLine{102 }
\DoxyCodeLine{108 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a7b31f62874b69e572dab6a96f424350c}{TrafficConflictVectorResTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{109     \textcolor{keywordtype}{bool} conflict = \textcolor{keyword}{false};}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_af6c583b3c5071419e1e5cdad08018e59}{parameters}}.resolutionType == SEARCH\_RESOLUTION)\{}
\DoxyCodeLine{112         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{113     \}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     }
\DoxyCodeLine{116 }
\DoxyCodeLine{117     conflict = conflict || state-\/>\mbox{\hyperlink{struct_cognition_state__t_a3afb07806773bbcbc44376f1f2b20f25}{allTrafficConflicts}}[SPEED\_RESOLUTION];}
\DoxyCodeLine{118     conflict = conflict || state-\/>\mbox{\hyperlink{struct_cognition_state__t_a3afb07806773bbcbc44376f1f2b20f25}{allTrafficConflicts}}[TRACK\_RESOLUTION];}
\DoxyCodeLine{119     conflict = conflict || state-\/>\mbox{\hyperlink{struct_cognition_state__t_a3afb07806773bbcbc44376f1f2b20f25}{allTrafficConflicts}}[ALTITUDE\_RESOLUTION];}
\DoxyCodeLine{120     conflict = conflict || state-\/>\mbox{\hyperlink{struct_cognition_state__t_a3afb07806773bbcbc44376f1f2b20f25}{allTrafficConflicts}}[VERTICALSPEED\_RESOLUTION];}
\DoxyCodeLine{121 }
\DoxyCodeLine{122     \textcolor{comment}{// TODO: Introduce a parameter to enforce checks to make sure if the}}
\DoxyCodeLine{123     \textcolor{comment}{// projected conflict is on the current flightplan. Current, the usage}}
\DoxyCodeLine{124     \textcolor{comment}{// of reutrn2NextWP is a hack (replace with proper parameter)}}
\DoxyCodeLine{125     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_af6c583b3c5071419e1e5cdad08018e59}{parameters}}.verifyPlanConflict)\{}
\DoxyCodeLine{126         conflict = conflict \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a5aece0d762d90ca5317890c6ae8fe29e}{planProjectedTrafficConflict}};}
\DoxyCodeLine{127     \}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     state-\/>\mbox{\hyperlink{struct_cognition_state__t_aea377f9e7f55f7a8d00a69ea58c92060}{trafficConflict}} = conflict \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a54fd7f200339114b10a7865604630070}{icReady}};}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{keywordtype}{int} ind = state-\/>\mbox{\hyperlink{struct_cognition_state__t_af6c583b3c5071419e1e5cdad08018e59}{parameters}}.resolutionType;}
\DoxyCodeLine{132     \textcolor{keywordflow}{if} (!state-\/>\mbox{\hyperlink{struct_cognition_state__t_afde51812e9c70a31465372eccc77c22f}{validResolution}}[ind])\{}
\DoxyCodeLine{133         \textcolor{keywordflow}{return} \textcolor{keyword}{false};       }
\DoxyCodeLine{134     \}}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \textcolor{keywordflow}{return} state-\/>\mbox{\hyperlink{struct_cognition_state__t_aea377f9e7f55f7a8d00a69ea58c92060}{trafficConflict}};}
\DoxyCodeLine{137 \}}
\DoxyCodeLine{138 }
\DoxyCodeLine{143 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a724e74691846f16f0855d8751a4cc5ce}{TrafficConflictPathResTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{144     \textcolor{keywordtype}{bool} conflict = \textcolor{keyword}{false};}
\DoxyCodeLine{145     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_af6c583b3c5071419e1e5cdad08018e59}{parameters}}.resolutionType != SEARCH\_RESOLUTION)\{}
\DoxyCodeLine{146         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{147     \}}
\DoxyCodeLine{148     conflict = conflict || state-\/>\mbox{\hyperlink{struct_cognition_state__t_a3afb07806773bbcbc44376f1f2b20f25}{allTrafficConflicts}}[SPEED\_RESOLUTION];}
\DoxyCodeLine{149     conflict = conflict || state-\/>\mbox{\hyperlink{struct_cognition_state__t_a3afb07806773bbcbc44376f1f2b20f25}{allTrafficConflicts}}[TRACK\_RESOLUTION];}
\DoxyCodeLine{150     conflict = conflict || state-\/>\mbox{\hyperlink{struct_cognition_state__t_a3afb07806773bbcbc44376f1f2b20f25}{allTrafficConflicts}}[ALTITUDE\_RESOLUTION];}
\DoxyCodeLine{151     conflict = conflict || state-\/>\mbox{\hyperlink{struct_cognition_state__t_a3afb07806773bbcbc44376f1f2b20f25}{allTrafficConflicts}}[VERTICALSPEED\_RESOLUTION];}
\DoxyCodeLine{152     conflict = conflict \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a5aece0d762d90ca5317890c6ae8fe29e}{planProjectedTrafficConflict}};}
\DoxyCodeLine{153 }
\DoxyCodeLine{154     state-\/>\mbox{\hyperlink{struct_cognition_state__t_aea377f9e7f55f7a8d00a69ea58c92060}{trafficConflict}} = conflict;}
\DoxyCodeLine{155     \textcolor{comment}{// Check for conflicts that are imminent due to the current flightplan}}
\DoxyCodeLine{156     \textcolor{comment}{// These are conflicts that DAIDALUS hasn't detected yet.}}
\DoxyCodeLine{157     \textcolor{keywordflow}{if}(!conflict \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a5aece0d762d90ca5317890c6ae8fe29e}{planProjectedTrafficConflict}})\{}
\DoxyCodeLine{158        \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0a4aa1e282135befb1c655f344243e96}{timeToTrafficViolation3}} < state-\/>\mbox{\hyperlink{struct_cognition_state__t_af6c583b3c5071419e1e5cdad08018e59}{parameters}}.planLookaheadTime)\{ }
\DoxyCodeLine{159           state-\/>\mbox{\hyperlink{struct_cognition_state__t_aea377f9e7f55f7a8d00a69ea58c92060}{trafficConflict}} = \textcolor{keyword}{true}; }
\DoxyCodeLine{160        \}}
\DoxyCodeLine{161     \}}
\DoxyCodeLine{162     \textcolor{keywordflow}{return} state-\/>\mbox{\hyperlink{struct_cognition_state__t_aea377f9e7f55f7a8d00a69ea58c92060}{trafficConflict}} \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a54fd7f200339114b10a7865604630070}{icReady}};}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 \}}
\DoxyCodeLine{165 }
\DoxyCodeLine{172 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a2ca7636519e81eb88bf06ca3c3983751}{TrafficConflictDitchTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{173     \textcolor{keywordflow}{return} state-\/>\mbox{\hyperlink{struct_cognition_state__t_aea377f9e7f55f7a8d00a69ea58c92060}{trafficConflict}} \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_af6c583b3c5071419e1e5cdad08018e59}{parameters}}.resolutionType == DITCH\_RESOLUTION;}
\DoxyCodeLine{174 \}}
\DoxyCodeLine{175 }
\DoxyCodeLine{180 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a3d317dfbaa6add4704a1fec25ded83f7}{MergingActivityTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{181     \textcolor{keywordflow}{return} state-\/>\mbox{\hyperlink{struct_cognition_state__t_ade10e7bdffd44089ea755de5bcda9ada}{mergingActive}} == 1 \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a54fd7f200339114b10a7865604630070}{icReady}};}
\DoxyCodeLine{182 \}}
\DoxyCodeLine{183 }
\DoxyCodeLine{187 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a3885f4753ecaea0d33f6b7546a998eff}{DitchingTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{188     \textcolor{keywordflow}{return} state-\/>\mbox{\hyperlink{struct_cognition_state__t_a698312171622d5976db818594e89de53}{ditch}} \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a54fd7f200339114b10a7865604630070}{icReady}};}
\DoxyCodeLine{189 \}}
\DoxyCodeLine{190 }
\DoxyCodeLine{194 \textcolor{keywordtype}{bool} \mbox{\hyperlink{_triggers_8hpp_a83dee42f127e6b28a81cadb498d73b72}{DitchSiteTODTrigger}}(\mbox{\hyperlink{struct_cognition_state__t}{CognitionState\_t}}* state)\{}
\DoxyCodeLine{195     \textcolor{keywordflow}{if}(state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}} != \textcolor{keyword}{nullptr})\{}
\DoxyCodeLine{196         std::string planID = state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>getID();}
\DoxyCodeLine{197         \textcolor{keywordflow}{return} (planID == \textcolor{stringliteral}{"{}DitchPath"{}} \&\&}
\DoxyCodeLine{198                 state-\/>\mbox{\hyperlink{struct_cognition_state__t_a12e10cd60bb81a3afbd1e87f8f90d4d7}{nextWpId}}[planID] >= state-\/>\mbox{\hyperlink{struct_cognition_state__t_a0669529e970de1a93162c07e4aae1cf1}{activePlan}}-\/>size()) \&\& state-\/>\mbox{\hyperlink{struct_cognition_state__t_a54fd7f200339114b10a7865604630070}{icReady}};}
\DoxyCodeLine{199     \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{200         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{201     \}}
\DoxyCodeLine{202 \}}
\DoxyCodeLine{203 }

\end{DoxyCode}
