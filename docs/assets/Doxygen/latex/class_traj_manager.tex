\hypertarget{class_traj_manager}{}\doxysection{Traj\+Manager Class Reference}
\label{class_traj_manager}\index{TrajManager@{TrajManager}}


Trajectory Management object.  




{\ttfamily \#include $<$Traj\+Manager.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_traj_manager_ac4cc8d2fcd4b6085545e5b602054280a}{Traj\+Manager}} (std\+::string \mbox{\hyperlink{structcallsign}{callsign}}, std\+::string config)
\begin{DoxyCompactList}\small\item\em Construct a new Traj Manager object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_traj_manager_a45e6c05ae8fdc9178c78fed132912764}{Read\+Param\+From\+File}} (std\+::string config)
\begin{DoxyCompactList}\small\item\em Read parameters from file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_traj_manager_acfefed23cbe0ae49f2b1a046c41a2347}{Update\+Dubins\+Planner\+Parameters}} (\mbox{\hyperlink{struct_dubins_params}{Dubins\+Params\+\_\+t}} \&params)
\begin{DoxyCompactList}\small\item\em Update dubins planner parameters. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_traj_manager_a68314e436ffb89b0f6541dcfb446fab1}{Find\+Path}} (std\+::string plan\+ID, \mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} from\+Position, \mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} to\+Position, \mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}} from\+Velocity, \mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}} to\+Velocity)
\begin{DoxyCompactList}\small\item\em Compute path. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_traj_manager_a1f0477999fcb00a7f8b64227772bb51f}{Get\+Total\+Waypoints}} (std\+::string plan\+ID)
\begin{DoxyCompactList}\small\item\em Get the Total Waypoints. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_traj_manager_a7bce4c6c916027d7149fa3757158a893}{Get\+Waypoint}} (std\+::string plan\+ID, int wpid, \mbox{\hyperlink{structwaypoint__t}{waypoint\+\_\+t}} \&wp)
\begin{DoxyCompactList}\small\item\em Get the Waypoint object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlarcfm_1_1_plan}{larcfm\+::\+Plan}} $\ast$ \mbox{\hyperlink{class_traj_manager_a2873a4044713f90051474b43ec324383}{Get\+Plan}} (std\+::string plan\+ID)
\begin{DoxyCompactList}\small\item\em Get pointer to Plan object. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_a98320dba7d693e779f4e2a9f0cdcbb92}\label{class_traj_manager_a98320dba7d693e779f4e2a9f0cdcbb92}} 
void {\bfseries Clear\+All\+Plans} ()
\begin{DoxyCompactList}\small\item\em Clear all plans. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_a6188205a6074aa795fa7cdd92f57f2e1}\label{class_traj_manager_a6188205a6074aa795fa7cdd92f57f2e1}} 
void {\bfseries Clear\+Fences} ()
\begin{DoxyCompactList}\small\item\em Clear fences. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_traj_manager_ab09a1d7f560de06fbf93e3730af6fb76}{Input\+Geofence\+Data}} (int type, int index, int total\+Vertices, double floor, double ceiling, double pos\mbox{[}$\,$\mbox{]}\mbox{[}2\mbox{]})
\begin{DoxyCompactList}\small\item\em Input geofence. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_traj_manager_a4878a4a9cf29f8cec2015b56c6891153}{Input\+Geofence\+Data}} (int type, int index, int total\+Vertices, double floor, double ceiling, std\+::vector$<$ \mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} $>$ \&vertices)
\begin{DoxyCompactList}\small\item\em Input geofence. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_traj_manager_ad029102a4fb513146d4b4bf396f464ae}{Input\+Flight\+Plan}} (const std\+::string \&plan\+\_\+id, const std\+::list$<$ \mbox{\hyperlink{structwaypoint__t}{waypoint\+\_\+t}} $>$ \&waypoints, const double init\+Heading, bool repair, double repair\+Turn\+Rate)
\begin{DoxyCompactList}\small\item\em Input a flightplan. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_traj_manager_afbc4d6a5b372500d7582acc2c532163a}{Input\+Traffic}} (std\+::string \mbox{\hyperlink{structcallsign}{callsign}}, \mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} \&\mbox{\hyperlink{arducopter_8h_a97f6f07d9b99c3e3d789183a9064a7da}{position}}, \mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}} \&velocity, double time)
\begin{DoxyCompactList}\small\item\em Input traffic data. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{class_traj_manager_a023ebd8ba7069b48add51d9a0c6910d2}{Plan\+To\+String}} (std\+::string plan\+ID)
\begin{DoxyCompactList}\small\item\em Convert plan to string. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_traj_manager_a5dc900acd178b0235221876d4df34306}{String\+To\+Plan}} (std\+::string plan\+ID, std\+::string input\+String)
\begin{DoxyCompactList}\small\item\em Convert string to plan. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_traj_manager_a146a0c73232ee8b9bc156834b13ae1ef}{Combine\+Plan}} (std\+::string planA, std\+::string planB, int index)
\begin{DoxyCompactList}\small\item\em Combine planA with planB from given index. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_traj_manager_ae0afdb2cba65f1e7bfea706753f82c73}{Set\+Plan\+Offset}} (std\+::string plan\+ID, int n, double offset)
\begin{DoxyCompactList}\small\item\em Set the time Offset for given plan. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} \mbox{\hyperlink{class_traj_manager_a2e93c7e3883b4735ddf28b56383f8a98}{Get\+Plan\+Position}} (std\+::string plan\+ID, double t)
\begin{DoxyCompactList}\small\item\em Get the position on plan at given t. \end{DoxyCompactList}\item 
trajectory\+Monitor\+Data\+\_\+t \mbox{\hyperlink{class_traj_manager_a110b698f40430e8cba4507d73e141155}{Monitor\+Trajectory}} (double time, std\+::string plan\+ID, \mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} pos, \mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}} vel, int next\+WP1, int next\+WP2)
\begin{DoxyCompactList}\small\item\em Monitor trajectory. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_traj_manager_aed928f616c72752436415104756cd49d}\label{class_traj_manager_aed928f616c72752436415104756cd49d}} 
\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} {\bfseries start\+Pos}
\begin{DoxyCompactList}\small\item\em start position for planning \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_af3451e801481ae9f4de8eb3dcb7f481a}\label{class_traj_manager_af3451e801481ae9f4de8eb3dcb7f481a}} 
\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} {\bfseries end\+Pos}
\begin{DoxyCompactList}\small\item\em goal position for planning \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_a59cc793d864e494b58fe835b09e52036}\label{class_traj_manager_a59cc793d864e494b58fe835b09e52036}} 
\mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}} {\bfseries start\+Vel}
\begin{DoxyCompactList}\small\item\em start velocity for planning \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_abbe2faad7d0585c91791f655bdd3327d}\label{class_traj_manager_abbe2faad7d0585c91791f655bdd3327d}} 
\mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}} {\bfseries end\+Vel}
\begin{DoxyCompactList}\small\item\em goal velocity for planning \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
int64\+\_\+t \mbox{\hyperlink{class_traj_manager_a166ccb9b94627ec79dcf91aa5171bc7f}{Find\+Dubins\+Path}} (std\+::string plan\+ID)
\begin{DoxyCompactList}\small\item\em Compute new path. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{class_traj_manager_aeb22fbc67e8ce8417064541e043a8c8a}{Find\+Time\+To\+Fence\+Violation}} (\mbox{\hyperlink{classlarcfm_1_1_poly3_d}{larcfm\+::\+Poly3D}} polygon, \mbox{\hyperlink{classlarcfm_1_1_vect3}{larcfm\+::\+Vect3}} so, \mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}} vel)
\begin{DoxyCompactList}\small\item\em Function to compute projected time to violation to all fence edges. \end{DoxyCompactList}\item 
std\+::vector$<$ double $>$ \mbox{\hyperlink{class_traj_manager_a726097bdf7594aa0d94bcf4aaa9930ac}{Compute\+Plan\+Offsets}} (const std\+::string plan\+ID, int next\+WP, \mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} current\+Pos, \mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}} current\+Vel, double time\+At\+Pos)
\begin{DoxyCompactList}\small\item\em Compute cross track (perpendicular deviation), along track (longitudinal deviations) and time delays. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_traj_manager_a583b8515d76d2ae07628a78e3726a44c}{Check\+Line\+Of\+Sightconflict}} (\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} start, \mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} end)
\begin{DoxyCompactList}\small\item\em Check line of sight conflict. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_a257756133fde7a93afe1a324b78fc15f}\label{class_traj_manager_a257756133fde7a93afe1a324b78fc15f}} 
void {\bfseries Log\+Input} ()
\begin{DoxyCompactList}\small\item\em Log inputs to planning. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_traj_manager_a2f9b4ade1a11fb05acbf2af948b3a930}\label{class_traj_manager_a2f9b4ade1a11fb05acbf2af948b3a930}} 
\mbox{\hyperlink{class_dubins_planner}{Dubins\+Planner}} {\bfseries db\+Planner}
\begin{DoxyCompactList}\small\item\em Dubins planner object. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_a8a59fd551ffa809a5574116ba6a9109e}\label{class_traj_manager_a8a59fd551ffa809a5574116ba6a9109e}} 
double {\bfseries well\+Clear\+DistH}
\begin{DoxyCompactList}\small\item\em well clear radius for planning \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_a0d144f50c9b14946e4447d31ca964617}\label{class_traj_manager_a0d144f50c9b14946e4447d31ca964617}} 
double {\bfseries well\+Clear\+DistV}
\begin{DoxyCompactList}\small\item\em well clear height for planning \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_ab37c675079d0da2baf940c17728d928e}\label{class_traj_manager_ab37c675079d0da2baf940c17728d928e}} 
int {\bfseries num\+Plans}
\begin{DoxyCompactList}\small\item\em number of plans \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_afee0e071553b2c6ca2793b30f8bc57ce}\label{class_traj_manager_afee0e071553b2c6ca2793b30f8bc57ce}} 
std\+::ofstream {\bfseries log}
\begin{DoxyCompactList}\small\item\em log holder \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_ad78426499dd4317635b7b5dfd1cd9b44}\label{class_traj_manager_ad78426499dd4317635b7b5dfd1cd9b44}} 
std\+::list$<$ \mbox{\hyperlink{classlarcfm_1_1_plan}{larcfm\+::\+Plan}} $>$ {\bfseries flight\+Plans}
\begin{DoxyCompactList}\small\item\em list of plans \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_a17106374cd0ee1f04f300623f983c377}\label{class_traj_manager_a17106374cd0ee1f04f300623f983c377}} 
std\+::list$<$ \mbox{\hyperlink{classlarcfm_1_1_plan}{larcfm\+::\+Plan}} $>$ {\bfseries traffic\+Plans}
\begin{DoxyCompactList}\small\item\em list of plans for traffic vehicles (intent information) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_a0cac578371392e0b5c3be7f1cb612855}\label{class_traj_manager_a0cac578371392e0b5c3be7f1cb612855}} 
std\+::list$<$ \mbox{\hyperlink{structfence_object}{fence\+Object}} $>$ {\bfseries fence\+List}
\begin{DoxyCompactList}\small\item\em list of fences \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_traj_manager_a1a8a6e833eb50186e893cfe30afce3bb}\label{class_traj_manager_a1a8a6e833eb50186e893cfe30afce3bb}} 
std\+::map$<$ std\+::string, \mbox{\hyperlink{structp_object}{p\+Object}} $>$ {\bfseries traffic\+List}
\begin{DoxyCompactList}\small\item\em list of traffic \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_traj_manager_ac4cc8d2fcd4b6085545e5b602054280a}\label{class_traj_manager_ac4cc8d2fcd4b6085545e5b602054280a}} 
\index{TrajManager@{TrajManager}!TrajManager@{TrajManager}}
\index{TrajManager@{TrajManager}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{TrajManager()}{TrajManager()}}
{\footnotesize\ttfamily Traj\+Manager\+::\+Traj\+Manager (\begin{DoxyParamCaption}\item[{std\+::string}]{callsign,  }\item[{std\+::string}]{config }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em callsign} & callsign string \\
\hline
{\em config} & configuration file \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_traj_manager_a583b8515d76d2ae07628a78e3726a44c}\label{class_traj_manager_a583b8515d76d2ae07628a78e3726a44c}} 
\index{TrajManager@{TrajManager}!CheckLineOfSightconflict@{CheckLineOfSightconflict}}
\index{CheckLineOfSightconflict@{CheckLineOfSightconflict}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{CheckLineOfSightconflict()}{CheckLineOfSightconflict()}}
{\footnotesize\ttfamily bool Traj\+Manager\+::\+Check\+Line\+Of\+Sightconflict (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}}}]{start,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}}}]{end }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyParams}{Parameters}
{\em start} & start position \\
\hline
{\em end} & end position \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_traj_manager_a146a0c73232ee8b9bc156834b13ae1ef}\label{class_traj_manager_a146a0c73232ee8b9bc156834b13ae1ef}} 
\index{TrajManager@{TrajManager}!CombinePlan@{CombinePlan}}
\index{CombinePlan@{CombinePlan}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{CombinePlan()}{CombinePlan()}}
{\footnotesize\ttfamily void Traj\+Manager\+::\+Combine\+Plan (\begin{DoxyParamCaption}\item[{std\+::string}]{planA,  }\item[{std\+::string}]{planB,  }\item[{int}]{index }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em planA} & \\
\hline
{\em planB} & \\
\hline
{\em index} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_traj_manager_a726097bdf7594aa0d94bcf4aaa9930ac}\label{class_traj_manager_a726097bdf7594aa0d94bcf4aaa9930ac}} 
\index{TrajManager@{TrajManager}!ComputePlanOffsets@{ComputePlanOffsets}}
\index{ComputePlanOffsets@{ComputePlanOffsets}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{ComputePlanOffsets()}{ComputePlanOffsets()}}
{\footnotesize\ttfamily std\+::vector$<$ double $>$ Traj\+Manager\+::\+Compute\+Plan\+Offsets (\begin{DoxyParamCaption}\item[{const std\+::string}]{plan\+ID,  }\item[{int}]{next\+WP,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}}}]{current\+Pos,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}}}]{current\+Vel,  }\item[{double}]{time\+At\+Pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & id of plan to compute metrics \\
\hline
{\em next\+WP} & next waypoint index \\
\hline
{\em current\+Pos} & current position \\
\hline
{\em current\+Vel} & current velocity \\
\hline
{\em time\+At\+Pos} & current time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::vector$<$double$>$ cross track offset, longitudinal offset, time offset 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_a166ccb9b94627ec79dcf91aa5171bc7f}\label{class_traj_manager_a166ccb9b94627ec79dcf91aa5171bc7f}} 
\index{TrajManager@{TrajManager}!FindDubinsPath@{FindDubinsPath}}
\index{FindDubinsPath@{FindDubinsPath}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{FindDubinsPath()}{FindDubinsPath()}}
{\footnotesize\ttfamily int64\+\_\+t Traj\+Manager\+::\+Find\+Dubins\+Path (\begin{DoxyParamCaption}\item[{std\+::string}]{plan\+ID }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & id to assign to plan \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int64\+\_\+t total number of waypoints computed 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_a68314e436ffb89b0f6541dcfb446fab1}\label{class_traj_manager_a68314e436ffb89b0f6541dcfb446fab1}} 
\index{TrajManager@{TrajManager}!FindPath@{FindPath}}
\index{FindPath@{FindPath}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{FindPath()}{FindPath()}}
{\footnotesize\ttfamily int Traj\+Manager\+::\+Find\+Path (\begin{DoxyParamCaption}\item[{std\+::string}]{plan\+ID,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}}}]{from\+Position,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}}}]{to\+Position,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}}}]{from\+Velocity,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}}}]{to\+Velocity }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & plan id to assign to this plan \\
\hline
{\em from\+Position} & start position \\
\hline
{\em to\+Position} & end position \\
\hline
{\em from\+Velocity} & start velocity \\
\hline
{\em to\+Velocity} & end velocity \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int total number of waypoints 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_aeb22fbc67e8ce8417064541e043a8c8a}\label{class_traj_manager_aeb22fbc67e8ce8417064541e043a8c8a}} 
\index{TrajManager@{TrajManager}!FindTimeToFenceViolation@{FindTimeToFenceViolation}}
\index{FindTimeToFenceViolation@{FindTimeToFenceViolation}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{FindTimeToFenceViolation()}{FindTimeToFenceViolation()}}
{\footnotesize\ttfamily double Traj\+Manager\+::\+Find\+Time\+To\+Fence\+Violation (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classlarcfm_1_1_poly3_d}{larcfm\+::\+Poly3D}}}]{polygon,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_vect3}{larcfm\+::\+Vect3}}}]{so,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}}}]{vel }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}


\begin{DoxyParams}{Parameters}
{\em polygon} & fence object \\
\hline
{\em so} & current position \\
\hline
{\em vel} & current velocity \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
double time to violation 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_a2873a4044713f90051474b43ec324383}\label{class_traj_manager_a2873a4044713f90051474b43ec324383}} 
\index{TrajManager@{TrajManager}!GetPlan@{GetPlan}}
\index{GetPlan@{GetPlan}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{GetPlan()}{GetPlan()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classlarcfm_1_1_plan}{larcfm\+::\+Plan}} $\ast$ Traj\+Manager\+::\+Get\+Plan (\begin{DoxyParamCaption}\item[{std\+::string}]{plan\+ID }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{classlarcfm_1_1_plan}{larcfm\+::\+Plan}}$\ast$ 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_a2e93c7e3883b4735ddf28b56383f8a98}\label{class_traj_manager_a2e93c7e3883b4735ddf28b56383f8a98}} 
\index{TrajManager@{TrajManager}!GetPlanPosition@{GetPlanPosition}}
\index{GetPlanPosition@{GetPlanPosition}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{GetPlanPosition()}{GetPlanPosition()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} Traj\+Manager\+::\+Get\+Plan\+Position (\begin{DoxyParamCaption}\item[{std\+::string}]{plan\+ID,  }\item[{double}]{t }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & id of plan \\
\hline
{\em t} & query time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_a1f0477999fcb00a7f8b64227772bb51f}\label{class_traj_manager_a1f0477999fcb00a7f8b64227772bb51f}} 
\index{TrajManager@{TrajManager}!GetTotalWaypoints@{GetTotalWaypoints}}
\index{GetTotalWaypoints@{GetTotalWaypoints}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{GetTotalWaypoints()}{GetTotalWaypoints()}}
{\footnotesize\ttfamily int Traj\+Manager\+::\+Get\+Total\+Waypoints (\begin{DoxyParamCaption}\item[{std\+::string}]{plan\+ID }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_a7bce4c6c916027d7149fa3757158a893}\label{class_traj_manager_a7bce4c6c916027d7149fa3757158a893}} 
\index{TrajManager@{TrajManager}!GetWaypoint@{GetWaypoint}}
\index{GetWaypoint@{GetWaypoint}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{GetWaypoint()}{GetWaypoint()}}
{\footnotesize\ttfamily int Traj\+Manager\+::\+Get\+Waypoint (\begin{DoxyParamCaption}\item[{std\+::string}]{plan\+ID,  }\item[{int}]{wpid,  }\item[{\mbox{\hyperlink{structwaypoint__t}{waypoint\+\_\+t}} \&}]{wp }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & flight plan id \\
\hline
{\em wpid} & waypoint index \\
\hline
{\em wp} & \mbox{[}out\mbox{]} waypoint \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_ad029102a4fb513146d4b4bf396f464ae}\label{class_traj_manager_ad029102a4fb513146d4b4bf396f464ae}} 
\index{TrajManager@{TrajManager}!InputFlightPlan@{InputFlightPlan}}
\index{InputFlightPlan@{InputFlightPlan}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{InputFlightPlan()}{InputFlightPlan()}}
{\footnotesize\ttfamily void Traj\+Manager\+::\+Input\+Flight\+Plan (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{plan\+\_\+id,  }\item[{const std\+::list$<$ \mbox{\hyperlink{structwaypoint__t}{waypoint\+\_\+t}} $>$ \&}]{waypoints,  }\item[{const double}]{init\+Heading,  }\item[{bool}]{repair,  }\item[{double}]{repair\+Turn\+Rate }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em plan\+\_\+id} & id of plan \\
\hline
{\em waypoints} & list of waypoints in plan \\
\hline
{\em init\+Heading} & initial heading \\
\hline
{\em repair} & convert linear plan to kinematic plan \\
\hline
{\em repair\+Turn\+Rate} & turn rate used for repairing \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_traj_manager_ab09a1d7f560de06fbf93e3730af6fb76}\label{class_traj_manager_ab09a1d7f560de06fbf93e3730af6fb76}} 
\index{TrajManager@{TrajManager}!InputGeofenceData@{InputGeofenceData}}
\index{InputGeofenceData@{InputGeofenceData}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{InputGeofenceData()}{InputGeofenceData()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Traj\+Manager\+::\+Input\+Geofence\+Data (\begin{DoxyParamCaption}\item[{int}]{type,  }\item[{int}]{index,  }\item[{int}]{total\+Vertices,  }\item[{double}]{floor,  }\item[{double}]{ceiling,  }\item[{double}]{pos\mbox{[}$\,$\mbox{]}\mbox{[}2\mbox{]} }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em type} & fence type (keep in or keep out) \\
\hline
{\em index} & index of fence \\
\hline
{\em total\+Vertices} & total vertices in fences \\
\hline
{\em floor} & floor altitude \\
\hline
{\em ceiling} & ceiling altitude \\
\hline
{\em pos} & array of positions \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_traj_manager_a4878a4a9cf29f8cec2015b56c6891153}\label{class_traj_manager_a4878a4a9cf29f8cec2015b56c6891153}} 
\index{TrajManager@{TrajManager}!InputGeofenceData@{InputGeofenceData}}
\index{InputGeofenceData@{InputGeofenceData}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{InputGeofenceData()}{InputGeofenceData()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Traj\+Manager\+::\+Input\+Geofence\+Data (\begin{DoxyParamCaption}\item[{int}]{type,  }\item[{int}]{index,  }\item[{int}]{total\+Vertices,  }\item[{double}]{floor,  }\item[{double}]{ceiling,  }\item[{std\+::vector$<$ \mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} $>$ \&}]{vertices }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em type} & fence type (keep in or keep out) \\
\hline
{\em index} & index of fence \\
\hline
{\em total\+Vertices} & total vertices in fences \\
\hline
{\em floor} & floor altitude \\
\hline
{\em ceiling} & ceiling altitude \\
\hline
{\em vertices} & list of all vertices \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_traj_manager_afbc4d6a5b372500d7582acc2c532163a}\label{class_traj_manager_afbc4d6a5b372500d7582acc2c532163a}} 
\index{TrajManager@{TrajManager}!InputTraffic@{InputTraffic}}
\index{InputTraffic@{InputTraffic}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{InputTraffic()}{InputTraffic()}}
{\footnotesize\ttfamily int Traj\+Manager\+::\+Input\+Traffic (\begin{DoxyParamCaption}\item[{std\+::string}]{callsign,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}} \&}]{position,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}} \&}]{velocity,  }\item[{double}]{time }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em callsign} & \\
\hline
{\em position} & \\
\hline
{\em velocity} & \\
\hline
{\em time} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_a110b698f40430e8cba4507d73e141155}\label{class_traj_manager_a110b698f40430e8cba4507d73e141155}} 
\index{TrajManager@{TrajManager}!MonitorTrajectory@{MonitorTrajectory}}
\index{MonitorTrajectory@{MonitorTrajectory}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{MonitorTrajectory()}{MonitorTrajectory()}}
{\footnotesize\ttfamily trajectory\+Monitor\+Data\+\_\+t Traj\+Manager\+::\+Monitor\+Trajectory (\begin{DoxyParamCaption}\item[{double}]{time,  }\item[{std\+::string}]{plan\+ID,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_position}{larcfm\+::\+Position}}}]{pos,  }\item[{\mbox{\hyperlink{classlarcfm_1_1_velocity}{larcfm\+::\+Velocity}}}]{vel,  }\item[{int}]{next\+WP1,  }\item[{int}]{next\+WP2 }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em time} & current time \\
\hline
{\em plan\+ID} & id of plan \\
\hline
{\em pos} & current position \\
\hline
{\em vel} & current velocity \\
\hline
{\em next\+WP1} & next wp on primary plan (Plan0) \\
\hline
{\em next\+WP2} & next wp on second plan \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
trajectory\+Monitor\+Data\+\_\+t 
\end{DoxyReturn}
Consider the combined plan if planid not Plan0 and contain the \char`\"{}\+Plan\char`\"{} prefix

Initialize the output struct

Extract the plan that is being monitored

Create projections based on current position

Compute offsets with respect to given plan\+ID and primary plan

Correct for any time delay (-\/ve offsets\mbox{[}2\mbox{]} indicate a delay)

Keep in fence checks


\begin{DoxyItemize}
\item Check fence conflict with current position
\item Check for projected fence conflict based on flightplan
\item Get position on plan for detected time to violation
\item If projected point on plan is outside fence, we have a real problem.
\end{DoxyItemize}

Keep out fence conflict
\begin{DoxyItemize}
\item Check conflict based on current position
\item Check for projected fence conflict based on flightplan
\end{DoxyItemize}

Check for projected traffic conflict based on traffic flightplans

Check for projected traffic conflicts for state based traffic

Check for next feasible waypoint in the main plan


\begin{DoxyItemize}
\item Check if next wp is before the conflict time
\item Skip BOT and MOT
\item Skip other tcps in a turn segment
\item The next segment should be sufficient long to facilitate plan capture
\item Check fence feasibility
\item Check line of sight to goal
\end{DoxyItemize}\mbox{\Hypertarget{class_traj_manager_a023ebd8ba7069b48add51d9a0c6910d2}\label{class_traj_manager_a023ebd8ba7069b48add51d9a0c6910d2}} 
\index{TrajManager@{TrajManager}!PlanToString@{PlanToString}}
\index{PlanToString@{PlanToString}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{PlanToString()}{PlanToString()}}
{\footnotesize\ttfamily std\+::string Traj\+Manager\+::\+Plan\+To\+String (\begin{DoxyParamCaption}\item[{std\+::string}]{plan\+ID }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::string 
\end{DoxyReturn}
\mbox{\Hypertarget{class_traj_manager_a45e6c05ae8fdc9178c78fed132912764}\label{class_traj_manager_a45e6c05ae8fdc9178c78fed132912764}} 
\index{TrajManager@{TrajManager}!ReadParamFromFile@{ReadParamFromFile}}
\index{ReadParamFromFile@{ReadParamFromFile}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{ReadParamFromFile()}{ReadParamFromFile()}}
{\footnotesize\ttfamily void Traj\+Manager\+::\+Read\+Param\+From\+File (\begin{DoxyParamCaption}\item[{std\+::string}]{config }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em config} & configuration file name \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_traj_manager_ae0afdb2cba65f1e7bfea706753f82c73}\label{class_traj_manager_ae0afdb2cba65f1e7bfea706753f82c73}} 
\index{TrajManager@{TrajManager}!SetPlanOffset@{SetPlanOffset}}
\index{SetPlanOffset@{SetPlanOffset}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{SetPlanOffset()}{SetPlanOffset()}}
{\footnotesize\ttfamily void Traj\+Manager\+::\+Set\+Plan\+Offset (\begin{DoxyParamCaption}\item[{std\+::string}]{plan\+ID,  }\item[{int}]{n,  }\item[{double}]{offset }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & id of plan \\
\hline
{\em n} & index of waypoint from which timeshift should be applied \\
\hline
{\em offset} & time offset \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_traj_manager_a5dc900acd178b0235221876d4df34306}\label{class_traj_manager_a5dc900acd178b0235221876d4df34306}} 
\index{TrajManager@{TrajManager}!StringToPlan@{StringToPlan}}
\index{StringToPlan@{StringToPlan}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{StringToPlan()}{StringToPlan()}}
{\footnotesize\ttfamily void Traj\+Manager\+::\+String\+To\+Plan (\begin{DoxyParamCaption}\item[{std\+::string}]{plan\+ID,  }\item[{std\+::string}]{input\+String }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em plan\+ID} & \\
\hline
{\em input\+String} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_traj_manager_acfefed23cbe0ae49f2b1a046c41a2347}\label{class_traj_manager_acfefed23cbe0ae49f2b1a046c41a2347}} 
\index{TrajManager@{TrajManager}!UpdateDubinsPlannerParameters@{UpdateDubinsPlannerParameters}}
\index{UpdateDubinsPlannerParameters@{UpdateDubinsPlannerParameters}!TrajManager@{TrajManager}}
\doxysubsubsection{\texorpdfstring{UpdateDubinsPlannerParameters()}{UpdateDubinsPlannerParameters()}}
{\footnotesize\ttfamily void Traj\+Manager\+::\+Update\+Dubins\+Planner\+Parameters (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_dubins_params}{Dubins\+Params\+\_\+t}} \&}]{params }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em params} & \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Modules/\+Core/\+Trajectory\+Manager/\mbox{\hyperlink{_traj_manager_8hpp}{Traj\+Manager.\+hpp}}\item 
Modules/\+Core/\+Trajectory\+Manager/Traj\+Manager.\+cpp\end{DoxyCompactItemize}
